<!doctype html>

<html>
	<head>
		<title>Resource Loader Test</title>
		<style>
			body {
				font-size: 0.8em;
				line-height: 1.5em;
				font-family: sans-serif;
			}
		</style>
	</head>
	<body>
		<h1>Resource Loader Tests</h1>
		<p>
			<ul id="tests"></ul>
		</p>
		<p>
			<strong>Datepicker....</strong>
			<input type="text" id="datepicker" />
		</p>
		<script type="text/javascript" src="../../load.php?modules=jquery|mediawiki&amp;debug=true&amp;skin=vector&amp;lang=ja"></script>
		<script>
			// Mimic what Skin::makeGlobalVariablesScript would have done
			mediaWiki.config.set( {
				'skin': 'vector',
				'wgUserLanguage': 'en',
				'wgUserName': null
			} );
		</script>
		<script type="text/javascript" >
		mediaWiki.loader.load( ['test', 'jquery.ui.core', 'jquery.ui.datepicker'] );
		mediaWiki.loader.using(
			[
				//'mediawiki.legacy.ajax',
				//'mediawiki.legacy.ajaxwatch',
				//'mediawiki.legacy.block',
				//'mediawiki.legacy.changepassword',
				//'mediawiki.legacy.edit',
				//'mediawiki.legacy.enhancedchanges',
				//'mediawiki.legacy.history',
				//'mediawiki.legacy.htmlform',
				//'mediawiki.legacy.IEFixes',
				//'mediawiki.legacy.metadata',
				//'mediawiki.legacy.mwsuggest',
				//'mediawiki.legacy.prefs',
				//'mediawiki.legacy.preview',
				//'mediawiki.legacy.protect',
				//'mediawiki.legacy.rightclickedit',
				//'mediawiki.legacy.search',
				//'mediawiki.legacy.upload',
				'mediawiki.legacy.wikibits'
			],
			function() {
				for ( key in mediaWiki.legacy ) {
					mediaWiki.log( key + ' || ' + typeof mediaWiki.legacy[key] )
				}
			}
		);
		</script>
		<script type="text/javascript">
			mediaWiki.loader.using( 'test', function() {
				mediaWiki.log( 'test (static with dynamic needs)' );
			} );
			mediaWiki.loader.using( 'jquery.ui.datepicker', function() {
				$( '#datepicker' ).datepicker();
				mediaWiki.log( 'datepicker (dynamic)' );
			} );
			$(document).ready( function() { mediaWiki.log( 'TEST' ); } );
		</script>
	</body>
</html>